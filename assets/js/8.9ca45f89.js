(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{213:function(t,s,a){t.exports=a.p+"assets/img/4.c0b487ea.png"},235:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"本页目录"}},[t._v("本页目录")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#本页目录"}},[t._v("本页目录")])]),n("li",[n("a",{attrs:{href:"#什么是数据卷"}},[t._v("什么是数据卷")])]),n("li",[n("a",{attrs:{href:"#数据卷示例"}},[t._v("数据卷示例")]),n("ul",[n("li",[n("a",{attrs:{href:"#拉取-nginx-镜像"}},[t._v("拉取 nginx 镜像")])]),n("li",[n("a",{attrs:{href:"#启动容器时挂载数据卷"}},[t._v("启动容器时挂载数据卷")])]),n("li",[n("a",{attrs:{href:"#查看容器的数据卷"}},[t._v("查看容器的数据卷")])])])]),n("li",[n("a",{attrs:{href:"#使用数据卷容器"}},[t._v("使用数据卷容器")])])])]),n("p"),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("h4",{attrs:{id:"非-root-用户-请添加-sudo"}},[t._v("非 root 用户 请添加 sudo")])]),t._v(" "),n("h2",{attrs:{id:"什么是数据卷"}},[t._v("什么是数据卷")]),t._v(" "),n("p",[t._v("数据卷就是数据(一个文件或者文件夹)。")]),t._v(" "),n("p",[t._v("Docker的理念之一是将应用与其运行的环境打包，docker容器的生命周期是与其运行的程序一致的，而我们对数据的要求是持久化，docker容器之间也需要有共享数据的渠道。")]),t._v(" "),n("p",[t._v("数据卷是特殊的目录，可以绕过联合文件系统，为一个或多个容器提供访问。数据卷设计的目的是数据的持久化，是完全独立于容器的生命周期，不会在容器删除的同时删除其挂载的数据卷，也不会存在类似垃圾收集机制，对容器引用的数据卷进行处理。")]),t._v(" "),n("h2",{attrs:{id:"数据卷示例"}},[t._v("数据卷示例")]),t._v(" "),n("h3",{attrs:{id:"拉取-nginx-镜像"}},[t._v("拉取 nginx 镜像")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker pull nginx")]),t._v("\nUsing default tag: latest\nlatest: Pulling from library/nginx\n000eee12ec04: Pull complete\neb22865337de: Pull complete\nbee5d581ef8b: Pull complete\nDigest: sha256:50cf965a6e08ec5784009d0fccb380fc479826b6e0e65684d9879170a9df8566\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nginx:latest\ndocker.io/library/nginx:latest\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker image ls")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnginx               latest              231d40e811cd        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         126MB\ncentos              latest              0f3e07c0138f        "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" months ago        220MB\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pwd")]),t._v("\n/root\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\nanaconda-ks.cfg\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  yum install -y tree")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\nInstalled:\n  tree.x86_64 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":1.6.0-10.el7\n\nComplete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree .")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n└── anaconda-ks.cfg\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" directories, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),n("h3",{attrs:{id:"启动容器时挂载数据卷"}},[t._v("启动容器时挂载数据卷")]),t._v(" "),n("p",[n("strong",[t._v("将本机 "),n("code",[t._v("/root/web")]),t._v(" 文件夹挂载到 nginx 容器的 "),n("code",[t._v("/usr/share/nginx/html")])]),t._v(" (这两个文件夹会自动创建)")]),t._v(" "),n("p",[n("code",[t._v("docker run -d --name nginx1 -p 8000:80 -v /root/web/:/usr/share/nginx/html nginx")])]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir ./web")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "<h1>hello, world</h1>" >> ./web/index.html')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree .")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── anaconda-ks.cfg\n└── web\n    └── index.html\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" directory, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" files\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat ./web/index.html")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run -d --name nginx1 -p 8000:80 -v /root/web/:/usr/share/nginx/html nginx")]),t._v("\n8a96393b6502fab1eb8a2115b21cb16d50b34d70e752f235e12b1cb89eb3420f\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container ls")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n8a96393b6502        nginx               "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx -g \'daemon of…"')]),t._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" seconds ago      Up "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),t._v(" seconds       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:8000-"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp   nginx1 \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  docker container exec -t nginx1 ls -l /usr/share/nginx/html")]),t._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n-rw-r--r--. "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 08:26 index.html\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container exec -t nginx1 cat /usr/share/nginx/html/index.html")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl localhost:8000")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container inspect nginx1 | grep IPAddress")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SecondaryIPAddresses"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IPAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"172.17.0.2"')]),t._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IPAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"172.17.0.2"')]),t._v(",\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl 172.17.0.2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ifconfig")]),t._v("\ndocker0: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flags")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("416")]),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v("<")]),t._v("UP,BROADCAST,RUNNING,MULTICAST"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\nens33: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flags")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("416")]),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v("<")]),t._v("UP,BROADCAST,RUNNING,MULTICAST"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),t._v("\n        inet "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.10")]),t._v(".7.105  netmask "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0  broadcast "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.10")]),t._v(".7.255\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\nlo: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flags")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v("<")]),t._v("UP,LOOPBACK,RUNNING"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\nvethc591871: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flags")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("416")]),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v("<")]),t._v("UP,BROADCAST,RUNNING,MULTICAST"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "<h1>hello, ahri</h1>" >> /root/web/index.html')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container exec -t nginx1 cat /usr/share/nginx/html/index.html")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, ahri"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl 127.0.0.1:8000")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, world"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("hello, ahri"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(213),alt:"访问"}})]),t._v(" "),n("h3",{attrs:{id:"查看容器的数据卷"}},[t._v("查看容器的数据卷")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# docker container inspect nginx1 | grep -A 9 "Mounts"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mounts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bind"')]),t._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Source"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/web"')]),t._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Destination"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/share/nginx/html"')]),t._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mode"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RW"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" true,\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Propagation"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rprivate"')]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),n("h2",{attrs:{id:"使用数据卷容器"}},[t._v("使用数据卷容器")]),t._v(" "),n("p",[t._v("在集中化管理平台中，大批量的容器都需要挂载相同的多个数据卷时，采用数据卷容器进行统一管理")]),t._v(" "),n("h4",{attrs:{id:"创建测试目录和文件"}},[t._v("创建测试目录和文件")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pwd")]),t._v("\n/root\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir volume && cd volume")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree .")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" directories, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" files\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir a")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir b")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch a/a.txt")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch b/b.txt")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree .")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── a\n│   └── a.txt\n└── b\n    └── b.txt\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" directories, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" files\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),n("h4",{attrs:{id:"创建数据卷容器"}},[t._v("创建数据卷容器")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run --name volume -v /root/volume/a:/opt/a -v /root/volume/b:/opt/b -ti centos /bin/bash")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@1cd6448d12fc /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l /opt/")]),t._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 09:02 a\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 09:02 b\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@1cd6448d12fc /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ctrl + p + q")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run --name app1 --volumes-from volume -ti centos /bin/bash")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@4880d56374d3 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l /opt/")]),t._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 09:02 a\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 09:02 b\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@4880d56374d3 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat /opt/a/a.txt")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@4880d56374d3 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ctrl + p + q")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container ls -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n4880d56374d3        centos              "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" minutes ago       Up "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" minutes                               app1\n1cd6448d12fc        centos              "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" minutes ago       Up "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" minutes                               volume\n8a96393b6502        nginx               "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx -g \'daemon of…"')]),t._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" minutes ago      Up "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" minutes       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0:8000-"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp   nginx1\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "text to a" >> ./a/a.txt')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost volume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container attach app1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@4880d56374d3 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat /opt/a/a.txt")]),t._v("\ntext to a\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@4880d56374d3 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),n("Valine")],1)}),[],!1,null,null,null);s.default=e.exports}}]);